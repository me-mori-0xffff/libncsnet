#!/bin/sh

# Папки, в которых нужно искать .3 файлы
directories="mac url"

# Функция для конвертации .3 файла в .txt
convert_man_to_txt() {
  input_file=$1
  output_file="${input_file%.3}.txt"
  # Используем groff для конвертации man-страницы в текст
  groff -Tascii -mandoc "$input_file" > "$output_file"
  echo "Converted $input_file to $output_file"
}

# Поиск и конвертация .3 файлов в указанных папках
for dir in $directories; do
  if [ -d "$dir" ]; then
    find "$dir" -type f -name "*.3" | while read -r file; do
      convert_man_to_txt "$file"
    done
  else
    echo "Directory $dir does not exist"
  fi
done

